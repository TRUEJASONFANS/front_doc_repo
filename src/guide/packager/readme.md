---
prev: false
next: ./others
---
# æ‰“åŒ…å™¨
## ä»€ä¹ˆå«æ¨¡å—åŒ–ï¼Ÿ
è¿œå¤æ—¶ä»£ï¼Œ å½“æˆ‘ä»¬ç¨‹åºè¿˜è¿œè¿œæœªè¾¾åˆ°å·¥ç¨‹çš„é‡çº§ï¼Œ æˆ‘ä»¬ç¨‹åºå¯èƒ½å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”šè‡³æ˜¯å‡ è¡Œcodeã€‚
æ¯”å¦‚ä¸€ä¸ªæ–‡ä»¶çš„å®ç°çš„[ä¿„ç½—æ–¯æ–¹å—](http://www.zhongwei.tech/front/blocks.html)ã€‚
[ä¿„ç½—æ–¯æ–¹å—](/blocks.html)
æ¨¡å—åŒ–çš„æ¦‚å¿µå°±æ˜¯ç”¨æ¨¡å—åŒ–æ–¹å¼å»ç®¡ç†ï¼Œé‡å¤åˆ©ç”¨ï¼Œä¼˜åŒ–ä»£ç å—,ä»è€Œè¾¾åˆ°å·¥ç¨‹çš„æ¦‚å¿µã€‚ åœ¨jsè¯­è¨€è¢«åˆ›é€ å‡ºæ¥çš„åˆæœŸï¼Œå®ƒä»…ä»…ç”¨äºæ“ä½œé¡µé¢çš„ä¸€äº›å°è„šæœ¬å·¥ä½œ.
å®Œå…¨æ— æ³•èƒœä»»å¤æ‚çš„è½¯ä»¶å·¥ç¨‹ã€‚éšç€Webé¡µé¢è¶Šæ¥è¶Šæ¥å¤æ‚åŒ–ï¼Œjsæ‰€æ‰¿æ‹…çš„å·¥ä½œè¶Šæ¥è¶Šå¤§ï¼Œæ‰€ä»¥å¯¹jsçš„ä»£ç å®ç°æ¨¡å—åŒ–ç®¡ç†éœ€æ±‚è¶Šæ¥è¶Šé‡è¦å’Œç´§æ€¥ï¼Œäºæ˜¯å‡ºç°éœ€è¦
æ¨¡å—åŒ–çš„æ ‡å‡†

## ç¤ºä¾‹ï¼š ä»¥ä¸€ä¸ªhtml5çš„æ¸¸æˆä¸ºä¾‹
[æµ·åº•å¤§å–‚ğŸŸ](http://www.zhongwei.tech/TinyHeart.html)

ç»è¿‡æ¨¡å—åŒ–æ‰“åŒ…åçš„è§£å†³æ–¹æ¡ˆ
[æµ·åº•å¤§å–‚ğŸŸv2](http://www.zhongwei.tech/TinyHeart_v2.html)

æ¨¡å—åŒ–å¸®æˆ‘ä»¬è§£å†³éœ€è¦å¸®æˆ‘ä»¬è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜
- å¦‚ä½•å‘å…¶ä»–æ¨¡å—å¯¼å‡º
- å¦‚ä½•åœ¨æ¨¡å—ä¸­å¼•ç”¨å…¶ä»–æ¨¡å—
- ä¸€äº›å…±æœ‰æ¨¡å—è¯¥å¦‚ä½•åˆ†ç¦»
- æ€ä¹ˆå¤„ç†å®¿ä¸»ç¯å¢ƒçš„ä¸åŒï¼Ÿ(æµè§ˆå™¨å’Œnodeçš„ç¯å¢ƒåŒºåˆ«)

## æ¨¡å—è§„èŒƒ

1. CommomJS (åŒæ­¥)
```
a.js
exports.add = function(a,b){
	return a+b;
}

b.js 
var add = require('a.js').add;
console.log(add(1,2))//3
```
2. AMD (å¼‚æ­¥)
```
define(['myModule', 'myOtherModule'],function(myModule, myOtherModule) {
	console.log(myModule.hello());
});
```
3. UMD (ç»Ÿä¸€)
ç®€è€Œè¨€ä¹‹å°±æ˜¯ä»åŒæ­¥åˆ°å¼‚æ­¥å†åˆ°ç»Ÿä¸€
[è¯¦ç»†å‚è§](https://75team.com/post/%E8%AF%91%E7%A5%9E%E9%A9%AC%E6%98%AFamd-commonjs-umd.html)

| ç¯å¢ƒ        | è§„èŒƒ           | å®ç°  |
| ------------- |:-------------:| -----:|
| node      | CommonJS | nodejs æ¨¡å— |
| æµè§ˆå™¨     | CommonJS      |   Browserify |
| æµè§ˆå™¨ | AMD |   RequireJS |
| æµè§ˆå™¨ | UMD |   ğŸ‘†ä¸¤è€… |

4. ES module (è§„èŒƒ) (æˆ‘ä»¬ç”¨è¿™ç§å°±è¡Œäº†)
ä¸Šé¢çš„æ¨¡å—åŒ–è§£å†³æ–¹æ¡ˆéƒ½æ˜¯ç¼ºä¹å®˜æ–¹çš„æ¨¡å—è§„èŒƒæ‰å‡ºæ¥çš„ï¼Œæ—¢ç„¶å¯¹æ¨¡å—åŒ–çš„éœ€æ±‚è¿™ä¹ˆæ—ºç››ï¼Œå®˜æ–¹åœ¨ES2015(ES6)é‡Œä¹Ÿå°±æå‡ºäº†å®˜æ–¹çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œä¸»è¦ä½¿ç”¨importå’Œexport ä¸¤ä¸ªå…³é”®å­—.
ç¤ºä¾‹
```javascript
import { export1 , export2 } from "module-name";
```
æ³¨æ„ï¼šç°åœ¨ä¸»æµæµè§ˆå™¨éƒ½æ²¡æœ‰åŸç”Ÿæ”¯æŒes module. æˆ‘ä»¬éœ€è¦é€šè¿‡babelè½¬è¯‘æˆ‘ä»¬çš„ä»£ç æ‰èƒ½è¾¾åˆ°æ­¤ç›®çš„ã€‚å³æˆ‘ä»¬ç”¨esè§„èŒƒå®ç°jsä»£ç ï¼Œæœ€ç»ˆè½¬è¯‘æ‰“åŒ…æˆæµè§ˆå™¨æ”¯æŒè¿è¡Œçš„jsä»£ç ã€‚

## webpack (ä¸‡ç‰©çš†æ¨¡å—)

### ä»€ä¹ˆæ˜¯æ¨¡å—ï¼Ÿ
*åœ¨æ¨¡å—åŒ–ç¼–ç¨‹ä¸­ï¼Œå¼€å‘è€…å°†ç¨‹åºåˆ†è§£æˆç¦»æ•£åŠŸèƒ½å—(discrete chunks of functionality)ï¼Œå¹¶ç§°ä¹‹ä¸ºæ¨¡å—ã€‚*
webpack é€šè¿‡ loader å¯ä»¥æ”¯æŒå„ç§è¯­è¨€å’Œé¢„å¤„ç†å™¨ç¼–å†™æ¨¡å—ã€‚loader æè¿°äº† webpack å¦‚ä½•å¤„ç† é JavaScript(non-JavaScript) _æ¨¡å—_ï¼Œå¹¶ä¸”åœ¨ bundle ä¸­å¼•å…¥è¿™äº›ä¾èµ–ã€‚ webpack ç¤¾åŒºå·²ç»ä¸ºå„ç§æµè¡Œè¯­è¨€å’Œè¯­è¨€å¤„ç†å™¨æ„å»ºäº† loaderï¼ŒåŒ…æ‹¬ï¼š

* CoffeeScript
* TypeScript
* ESNext (Babel)
* Sass
* Less
* Stylus

![webpackæ¨¡å—](https://webpack.github.io/assets/what-is-webpack.png)


Webpack æ˜¯ä¸€ä¸ªæ‰“åŒ…æ¨¡å—åŒ– JavaScript çš„å·¥å…·ï¼Œåœ¨ Webpack é‡Œä¸€åˆ‡æ–‡ä»¶çš†æ¨¡å—ï¼Œé€šè¿‡ Loader è½¬æ¢æ–‡ä»¶ï¼Œé€šè¿‡ Plugin æ³¨å…¥é’©å­ï¼Œæœ€åè¾“å‡ºç”±å¤šä¸ªæ¨¡å—ç»„åˆæˆçš„æ–‡ä»¶ã€‚Webpack ä¸“æ³¨äºæ„å»ºæ¨¡å—åŒ–é¡¹ç›®ã€‚
[å›¾ä¾‹](http://webpack.wuhaolin.cn/1%E5%85%A5%E9%97%A8/img/1-2webpack.png)

### ä¸€ä¸ªå¥å…¨æ‰“åŒ…å™¨çš„èŒè´£
1. ä»£ç è½¬æ¢ï¼šTypeScript ç¼–è¯‘æˆ JavaScriptã€SCSS ç¼–è¯‘æˆ CSS ç­‰ã€‚
2. æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼© JavaScriptã€CSSã€HTML ä»£ç ï¼Œå‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰ã€‚
3. ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œéƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½ã€‚
4. æ¨¡å—åˆå¹¶ï¼šåœ¨é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®é‡Œä¼šæœ‰å¾ˆå¤šä¸ªæ¨¡å—å’Œæ–‡ä»¶ï¼Œéœ€è¦æ„å»ºåŠŸèƒ½æŠŠæ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ã€‚
5. è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç çš„å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºã€åˆ·æ–°æµè§ˆå™¨ã€‚
6. ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤åˆ°ä»“åº“å‰éœ€è¦æ ¡éªŒä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä»¥åŠå•å…ƒæµ‹è¯•æ˜¯å¦é€šè¿‡ã€‚
7. è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿã€‚

### loader æ–‡ä»¶ç¿»è¯‘å‘˜
æ‰“åŒ…å™¨ä¸­çš„æ–‡ä»¶ç±»å‹ç¿»è¯‘å‘˜ï¼Œ
### plugin
webpackçš„æ’ä»¶ç”¨æ¥æä¾›é¢å¤–çš„åŠŸèƒ½ï¼ˆé€šè¿‡åœ¨æ„å»ºè¿‡ç¨‹æ³¨å…¥é’©å­å®ç°ï¼‰

### DevServer
1. æä¾› HTTP æœåŠ¡è€Œä¸æ˜¯ä½¿ç”¨æœ¬åœ°æ–‡ä»¶é¢„è§ˆï¼›
2. ç›‘å¬æ–‡ä»¶çš„å˜åŒ–å¹¶è‡ªåŠ¨åˆ·æ–°ç½‘é¡µï¼Œåšåˆ°å®æ—¶é¢„è§ˆï¼›
3. æ”¯æŒ Source Mapï¼Œä»¥æ–¹ä¾¿è°ƒè¯•ã€‚

### å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ
1. Entryï¼šå…¥å£ï¼ŒWebpack æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°†ä» Entry å¼€å§‹ï¼Œå¯æŠ½è±¡æˆè¾“å…¥ã€‚
2. Moduleï¼šæ¨¡å—ï¼Œåœ¨ Webpack é‡Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚Webpack ä¼šä»é…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚
3. Chunkï¼šä»£ç å—ï¼Œä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²ã€‚
4. Loaderï¼šæ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ã€‚
5. Pluginï¼šæ‰©å±•æ’ä»¶ï¼Œåœ¨ Webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœæˆ–åšä½ æƒ³è¦çš„äº‹æƒ…ã€‚
6. Outputï¼šè¾“å‡ºç»“æœï¼Œåœ¨ Webpack ç»è¿‡ä¸€ç³»åˆ—å¤„ç†å¹¶å¾—å‡ºæœ€ç»ˆæƒ³è¦çš„ä»£ç åè¾“å‡ºç»“æœã€‚

### å®ä¾‹
[Love fish](https://github.com/TRUEJASONFANS/lovingFish)

### èµ·æ­¥
webpack4
```
npm install webpack webpack-cli --save-dev
æˆ–è€…
yarn add -D webpack webpack-cli
```
æ·»åŠ webpack.config.js ç¤ºä¾‹

```
const path = require('path');

module.exports = {
  entry: 'index.js',//å…¥å£è®¾ç½®
	devtool: 'inline-source-map',// é…ç½®æ˜ å°„æºç 
  output: {// è¾“å‡ºè®¾å®š
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
  }
};

```

### æ¯æ¬¡ä¿®æ”¹ä»£ç åéœ€è¦é‡æ–°build, ç„¶åé‡æ–°åˆ·æ–°html
1. ä½¿ç”¨è§‚å¯Ÿæ¨¡å¼
```
webpack --watch
```
2. ä½¿ç”¨ webpack-dev-server
ä¿®æ”¹æ–‡ä»¶åï¼Œè‡ªåŠ¨é‡æ–°åŠ è½½htmlé¡µé¢
webpack.config.js
```
  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    devtool: 'inline-source-map',
+   devServer: {
+     contentBase: './dist'
+   },
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Development'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
```
æ›´æ–°package.json
```
 {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "webpack.config.js",
    "scripts": {
      "test": "echo \"Error: no test specified\" && exit 1",
      "watch": "webpack --watch",
+     "start": "webpack-dev-server --open",
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^0.1.16",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^3.0.0",
      "xml-loader": "^1.2.1"
    }
  }

```
è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å¯åŠ¨å¼€å‘æ¨¡å¼
```
yarn start
```
### çƒ­åŠ è½½ï¼ˆç±»ä¼¼äºjavaçƒ­åŠ è½½æŠ€æœ¯ï¼‰
æ¨¡å—çƒ­æ›¿æ¢(Hot Module Replacement æˆ– HMR)æ˜¯ webpack æä¾›çš„æœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒå…è®¸åœ¨è¿è¡Œæ—¶æ›´æ–°å„ç§æ¨¡å—ï¼Œè€Œæ— éœ€è¿›è¡Œå®Œå…¨åˆ·æ–°ã€‚æœ¬é¡µé¢é‡ç‚¹ä»‹ç»å®ç°ï¼Œè€Œæ¦‚å¿µé¡µé¢æä¾›äº†æ›´å¤šå…³äºå®ƒçš„å·¥ä½œåŸç†ä»¥åŠä¸ºä»€ä¹ˆå®ƒæœ‰ç”¨çš„ç»†èŠ‚ã€‚
*HMR ä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¿™æ„å‘³ç€å®ƒåº”å½“åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨*
![](https://pic1.zhimg.com/v2-2ae68735d9eb4e4b6a877d843d520f6c_r.jpg)