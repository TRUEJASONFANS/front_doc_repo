<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Canvas | 前端知识图谱</title>
    <meta name="description" content="front knowledge collecting repo.">
    
    
    <link rel="preload" href="/assets/css/0.styles.fe066829.css" as="style"><link rel="preload" href="/assets/js/app.0a286343.js" as="script"><link rel="preload" href="/assets/js/2.3d15ea8a.js" as="script"><link rel="preload" href="/assets/js/8.0dbaa283.js" as="script"><link rel="prefetch" href="/assets/js/10.b42dc1b0.js"><link rel="prefetch" href="/assets/js/11.e5880191.js"><link rel="prefetch" href="/assets/js/12.10a0f767.js"><link rel="prefetch" href="/assets/js/13.5e18931f.js"><link rel="prefetch" href="/assets/js/14.7dfdaba3.js"><link rel="prefetch" href="/assets/js/15.e8a51af0.js"><link rel="prefetch" href="/assets/js/16.82cefe28.js"><link rel="prefetch" href="/assets/js/17.9e3f0d55.js"><link rel="prefetch" href="/assets/js/18.3abee026.js"><link rel="prefetch" href="/assets/js/19.fa1a770d.js"><link rel="prefetch" href="/assets/js/20.b293c829.js"><link rel="prefetch" href="/assets/js/21.e13e8578.js"><link rel="prefetch" href="/assets/js/22.fd0da2b0.js"><link rel="prefetch" href="/assets/js/23.0d648270.js"><link rel="prefetch" href="/assets/js/24.33faf053.js"><link rel="prefetch" href="/assets/js/25.eaf6e059.js"><link rel="prefetch" href="/assets/js/26.3fad08a7.js"><link rel="prefetch" href="/assets/js/3.440bffa7.js"><link rel="prefetch" href="/assets/js/4.bd5fd8ab.js"><link rel="prefetch" href="/assets/js/5.a37ac758.js"><link rel="prefetch" href="/assets/js/6.e6779ed7.js"><link rel="prefetch" href="/assets/js/7.99f4b039.js"><link rel="prefetch" href="/assets/js/9.90875d31.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fe066829.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端知识图谱</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/knowledgemap/" class="nav-link">知识图谱</a></div> <a href="https://github.com/TRUEJASONFANS/front_doc_repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/knowledgemap/" class="nav-link">知识图谱</a></div> <a href="https://github.com/TRUEJASONFANS/front_doc_repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">工具链</a></li><li><a href="/guide/packageManager.html" class="sidebar-link">包管理器</a></li><li><a href="/guide/packager/" class="sidebar-link">打包器</a></li><li><a href="/guide/compiler.html" class="sidebar-link">编译器Babel</a></li><li><a href="/guide/packager/others.html" class="sidebar-link">其他打包器相关</a></li><li><a href="/guide/unit_test.html" class="sidebar-link">测试</a></li><li><a href="/guide/canvas_doc/" class="active sidebar-link">Canvas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#案例" class="sidebar-link">案例</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#canvas-坐标" class="sidebar-link">Canvas 坐标</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#绘制" class="sidebar-link">绘制</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#贝塞尔曲线" class="sidebar-link">贝塞尔曲线</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#绘制文本" class="sidebar-link">绘制文本</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#绘制图片，切片" class="sidebar-link">绘制图片，切片</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#canvas-save-restore" class="sidebar-link">Canvas save&amp;&amp;restore</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#坐标变换" class="sidebar-link">坐标变换</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#合成" class="sidebar-link">合成</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#动画" class="sidebar-link">动画</a></li><li class="sidebar-sub-header"><a href="/guide/canvas_doc/#更多知识" class="sidebar-link">更多知识</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="canvas"><a href="#canvas" aria-hidden="true" class="header-anchor">#</a> Canvas</h1> <p><img src="/assets/img/canvas-opengl-webgl-css-shaders-glsl.874e50f8.png" alt="canvas"></p> <p>Canvas是HTML5新增的组件，它就像一块幕布，可以用JavaScript在上面绘制各种图表、动画等。
没有Canvas的年代，绘图只能借助Flash插件实现，页面不得不用JavaScript和Flash进行交互。有了Canvas，我们就再也不需要Flash了，直接使用JavaScript完成绘制。
一个Canvas定义了一个指定尺寸的矩形框，在这个范围内我们可以随意绘制。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  
    <span class="token operator">&lt;</span>canvas id<span class="token operator">=</span><span class="token string">&quot;canvas1&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;1000&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;440&quot;</span><span class="token operator">&gt;</span>Canvas not supported<span class="token operator">&lt;</span><span class="token operator">/</span>canvas<span class="token operator">&gt;</span>
  
</code></pre></div><h2 id="案例"><a href="#案例" aria-hidden="true" class="header-anchor">#</a> 案例</h2> <p>一个基于canvas的动画
<!----></p> <h2 id="canvas-坐标"><a href="#canvas-坐标" aria-hidden="true" class="header-anchor">#</a> Canvas 坐标</h2> <p>原点位于左上角, x 轴横向向右,  Y 轴竖向向下为正方向.
canvas元素默认被网格所覆盖。通常来说网格中的一个单元相当于canvas元素中的一像素。栅格的起点为左上角（坐标为（0,0））。所有元素的位置都相对于原点来定位。所以图中蓝色方形左上角的坐标为距离左边（X轴）x像素，距离上边（Y轴）y像素（坐标为（x,y)。</p> <p><img src="https://mdn.mozillademos.org/files/224/Canvas_default_grid.png" alt="坐标"></p> <h2 id="绘制"><a href="#绘制" aria-hidden="true" class="header-anchor">#</a> 绘制</h2> <p>canvas只支持一种原生的 图形绘制：矩形。所有其他图形都至少需要生成一种路径(path)。</p> <ul><li>画矩形</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//绘制矩形,填充的默认颜色为黑色</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//绘制矩形边框</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p>矩形：
<!----></p> <ul><li>绘制路径</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function drawLine(){
    var canvas = document.getElementById('tutorial');
    if (!canvas.getContext) return;
    var ctx = canvas.getContext(&quot;2d&quot;);
    ctx.beginPath(); //新建一条path
    ctx.moveTo(50, 50); //把画笔移动到指定的坐标
    ctx.lineTo(200, 50);  //绘制一条从当前位置到指定坐标(200, 50)的直线.
    //闭合路径。会拉一条从当前点到path起始点的直线。如果当前点与起始点重合，则什么都不做
    ctx.closePath();
    ctx.stroke(); //绘制路径。
}
function drawTriangle(){
    var canvas = document.getElementById('tutorial');
    if (!canvas.getContext) return;
    var ctx = canvas.getContext(&quot;2d&quot;);
    ctx.beginPath();
    ctx.moveTo(50, 50);
    ctx.lineTo(200, 50);
    ctx.lineTo(200, 200);
   
    ctx.fill(); //填充闭合区域。如果path没有闭合，则fill()会自动闭合路径。
}
</code></pre></div><p>绘制路径：
<!----></p> <h2 id="贝塞尔曲线"><a href="#贝塞尔曲线" aria-hidden="true" class="header-anchor">#</a> 贝塞尔曲线</h2> <ul><li>二次贝塞尔曲线: 由两个锚点和一个控制点组成quadraticCruveTo(double cpx, double cpy, double x, double y)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function draw(){
    var canvas = document.getElementById('tutorial');
    if (!canvas.getContext) return;
    var ctx = canvas.getContext(&quot;2d&quot;);
    ctx.beginPath();
    ctx.moveTo(10, 200); //起始点
    var cp1x = 40, cp1y = 100;  //控制点
    var x = 200, y = 200; // 结束点
    //绘制二次贝塞尔曲线
    ctx.quadraticCurveTo(cp1x, cp1y, x, y);
    ctx.stroke();
    
    ctx.beginPath();
    ctx.rect(10, 200, 10, 10);
    ctx.rect(cp1x, cp1y, 10, 10);
    ctx.rect(x, y, 10, 10);
    ctx.fill();
    
}
</code></pre></div><ul><li>三次方贝塞尔曲线：创建一条代表三次方贝塞尔曲线的路径. bezierCurveTo(double cpx, double cpy, double cp2x, double cp2y, double x, double y)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function draw(){
    var canvas = document.getElementById('tutorial');
    if (!canvas.getContext) return;
    var ctx = canvas.getContext(&quot;2d&quot;);
    ctx.beginPath();
    ctx.moveTo(40, 200); //起始点
    var cp1x = 20, cp1y = 100;  //控制点1
    var cp2x = 100, cp2y = 120;  //控制点2
    var x = 200, y = 200; // 结束点
    //绘制二次贝塞尔曲线
    ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
    ctx.stroke();

    ctx.beginPath();
    ctx.rect(40, 200, 10, 10);
    ctx.rect(cp1x, cp1y, 10, 10);
    ctx.rect(cp2x, cp2y, 10, 10);
    ctx.rect(x, y, 10, 10);
    ctx.fill();

}
draw();
</code></pre></div><p>贝塞尔曲线：
<!----></p> <h2 id="绘制文本"><a href="#绘制文本" aria-hidden="true" class="header-anchor">#</a> 绘制文本</h2> <div class="language- extra-class"><pre class="language-text"><code>var ctx;
function draw(){
    var canvas = document.getElementById('tutorial');
    if (!canvas.getContext) return;
    ctx = canvas.getContext(&quot;2d&quot;);
    ctx.font = &quot;100px sans-serif&quot;
    ctx.fillText(&quot;天若有情&quot;, 10, 100);
    ctx.strokeText(&quot;天若有情&quot;, 10, 200)
}
draw();
</code></pre></div><h2 id="绘制图片，切片"><a href="#绘制图片，切片" aria-hidden="true" class="header-anchor">#</a> 绘制图片，切片</h2> <h2 id="canvas-save-restore"><a href="#canvas-save-restore" aria-hidden="true" class="header-anchor">#</a> Canvas save&amp;&amp;restore</h2> <p>canvas的API提供了两个名叫save()和restore()的方法，用于保存及恢复当前Canvas绘图环境的所有属性。其中save()可以保存当前状态，而restore()可以还原之前保存的状态。这两个方法再绘图中有着重要的作用，比如我们在绘图的时候需要使用多种颜色，颜色需要不时的切换。那么使用save()和restore()方法即可比较方便的实现此功能。
保存的信息包含：</p> <ol><li>当前的坐标变换（变换矩阵）信息，比如旋转或平移时使用的rotate()和setTransform()方法</li> <li>当前剪贴区域</li> <li>图形上下文对象（CanvasRenderingContext2D）的当前属性值</li></ol> <h2 id="坐标变换"><a href="#坐标变换" aria-hidden="true" class="header-anchor">#</a> 坐标变换</h2> <p>1.平移 translate
2.旋转 rotate
3.scale 缩放坐标体系
4. transform</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   skyOffset <span class="token operator">=</span> skyOffset <span class="token operator">&lt;</span> canvas<span class="token punctuation">.</span>width <span class="token operator">?</span>
               skyOffset <span class="token operator">+</span> <span class="token constant">SKY_VELOCITY</span><span class="token operator">/</span>fps <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

   grassOffset <span class="token operator">=</span> grassOffset <span class="token operator">&lt;</span> canvas<span class="token punctuation">.</span>width <span class="token operator">?</span>
                 grassOffset <span class="token operator">+</span>  <span class="token constant">GRASS_VELOCITY</span><span class="token operator">/</span>fps <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

   treeOffset <span class="token operator">=</span> treeOffset <span class="token operator">&lt;</span> canvas<span class="token punctuation">.</span>width <span class="token operator">?</span>
                treeOffset <span class="token operator">+</span> <span class="token constant">TREE_VELOCITY</span><span class="token operator">/</span>fps <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

   nearTreeOffset <span class="token operator">=</span> nearTreeOffset <span class="token operator">&lt;</span> canvas<span class="token punctuation">.</span>width <span class="token operator">?</span>
                    nearTreeOffset <span class="token operator">+</span> <span class="token constant">FAST_TREE_VELOCITY</span><span class="token operator">/</span>fps <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>skyOffset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>sky<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>sky<span class="token punctuation">,</span> sky<span class="token punctuation">.</span>width<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>treeOffset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token number">1100</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token number">1400</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token number">1700</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>nearTreeOffset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>nearTree<span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>nearTree<span class="token punctuation">,</span> <span class="token number">1250</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>nearTree<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>nearTree<span class="token punctuation">,</span> <span class="token number">1800</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>grassOffset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>grass<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token operator">-</span>grass<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>grass<span class="token punctuation">,</span> grass<span class="token punctuation">.</span>width<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span>
                     canvas<span class="token punctuation">.</span>height<span class="token operator">-</span>grass<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>grass2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token operator">-</span>grass2<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

   context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>grass2<span class="token punctuation">,</span> grass2<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
                     canvas<span class="token punctuation">.</span>height<span class="token operator">-</span>grass2<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
   context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="合成"><a href="#合成" aria-hidden="true" class="header-anchor">#</a> 合成</h2> <ul><li>source-over(default)
<img src="http://lizhenchao.oss-cn-shenzhen.aliyuncs.com/imgs/17-6-10/15850624.jpg" alt="覆盖"></li></ul> <h2 id="动画"><a href="#动画" aria-hidden="true" class="header-anchor">#</a> 动画</h2> <ol><li>setInterval</li> <li>setTimeout</li> <li>requestAnimationFrame 自行决定最佳的帧速率</li></ol> <p>setInterval或setTimeout实现的JavaScript动画的缺点就是可靠性不足，浏览器无法保证每一帧渲染的时间间隔，一般情况下，每秒平均刷新次数能够达到60帧，就能够给人流畅的体验，即每过 1000/60 毫秒渲染新一帧即可
为此，requestAnimationFrame应运而生，其作用就是让浏览器流畅的执行动画效果。可以将其理解为专门用来实现动画效果的api，通过这个api,可以告诉浏览器某个JavaScript代码要执行动画，浏览器收到通知后，则会运行这些代码的时候进行优化，实现流畅的效果，而不再需要开发人员烦心刷新频率的问题了。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Update and draw animation objects</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token comment">// sustatin the animation</span>
<span class="token punctuation">}</span>
requestAniamtionFrame
</code></pre></div><h2 id="更多知识"><a href="#更多知识" aria-hidden="true" class="header-anchor">#</a> 更多知识</h2> <p>Three.js webGL的封装
各大游戏动画引擎coco2d js</p> <h3 id="版权声明"><a href="#版权声明" aria-hidden="true" class="header-anchor">#</a> 版权声明</h3> <p><a href="https://blog.csdn.net/u012468376/article/details/73350998" target="_blank" rel="noopener noreferrer">本文部分插图和文字节选自<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/TRUEJASONFANS/front_doc_repo/edit/master/docs/guide/canvas_doc/readme.md" target="_blank" rel="noopener noreferrer">在 github 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/26/2019, 5:32:04 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/unit_test.html" class="prev">
          测试
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0a286343.js" defer></script><script src="/assets/js/2.3d15ea8a.js" defer></script><script src="/assets/js/8.0dbaa283.js" defer></script>
  </body>
</html>
