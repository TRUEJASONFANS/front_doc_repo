<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Umi | 前端知识图谱</title>
    <meta name="description" content="front knowledge collecting repo.">
    
    
    <link rel="preload" href="/front_doc_repo/assets/css/0.styles.039a693d.css" as="style"><link rel="preload" href="/front_doc_repo/assets/js/app.97cd5399.js" as="script"><link rel="preload" href="/front_doc_repo/assets/js/2.3956e618.js" as="script"><link rel="preload" href="/front_doc_repo/assets/js/26.60ea9fa2.js" as="script"><link rel="prefetch" href="/front_doc_repo/assets/js/10.4ab71863.js"><link rel="prefetch" href="/front_doc_repo/assets/js/11.25bf7d3e.js"><link rel="prefetch" href="/front_doc_repo/assets/js/12.34f02808.js"><link rel="prefetch" href="/front_doc_repo/assets/js/13.2b93925c.js"><link rel="prefetch" href="/front_doc_repo/assets/js/14.5a742701.js"><link rel="prefetch" href="/front_doc_repo/assets/js/15.6a399a24.js"><link rel="prefetch" href="/front_doc_repo/assets/js/16.0046b8ec.js"><link rel="prefetch" href="/front_doc_repo/assets/js/17.0e103b2d.js"><link rel="prefetch" href="/front_doc_repo/assets/js/18.5072cbf2.js"><link rel="prefetch" href="/front_doc_repo/assets/js/19.a0d9d787.js"><link rel="prefetch" href="/front_doc_repo/assets/js/20.2eaefb62.js"><link rel="prefetch" href="/front_doc_repo/assets/js/21.de7e89cf.js"><link rel="prefetch" href="/front_doc_repo/assets/js/22.5b374a79.js"><link rel="prefetch" href="/front_doc_repo/assets/js/23.2a10143f.js"><link rel="prefetch" href="/front_doc_repo/assets/js/24.b36d1cac.js"><link rel="prefetch" href="/front_doc_repo/assets/js/25.7045bdc5.js"><link rel="prefetch" href="/front_doc_repo/assets/js/27.a4dfaa9f.js"><link rel="prefetch" href="/front_doc_repo/assets/js/28.27f7ce39.js"><link rel="prefetch" href="/front_doc_repo/assets/js/29.c52599a9.js"><link rel="prefetch" href="/front_doc_repo/assets/js/3.57df0c15.js"><link rel="prefetch" href="/front_doc_repo/assets/js/30.f18466b4.js"><link rel="prefetch" href="/front_doc_repo/assets/js/31.02b3a2e0.js"><link rel="prefetch" href="/front_doc_repo/assets/js/32.bde7de68.js"><link rel="prefetch" href="/front_doc_repo/assets/js/33.a73d22dd.js"><link rel="prefetch" href="/front_doc_repo/assets/js/34.381f4843.js"><link rel="prefetch" href="/front_doc_repo/assets/js/35.b7c4276b.js"><link rel="prefetch" href="/front_doc_repo/assets/js/36.f19f7b24.js"><link rel="prefetch" href="/front_doc_repo/assets/js/37.627c7e1b.js"><link rel="prefetch" href="/front_doc_repo/assets/js/38.96e54850.js"><link rel="prefetch" href="/front_doc_repo/assets/js/39.fb5a12ec.js"><link rel="prefetch" href="/front_doc_repo/assets/js/4.345e7341.js"><link rel="prefetch" href="/front_doc_repo/assets/js/5.49bdc8b8.js"><link rel="prefetch" href="/front_doc_repo/assets/js/6.0200d489.js"><link rel="prefetch" href="/front_doc_repo/assets/js/7.cf2445a2.js"><link rel="prefetch" href="/front_doc_repo/assets/js/8.91d717e4.js"><link rel="prefetch" href="/front_doc_repo/assets/js/9.36920fad.js">
    <link rel="stylesheet" href="/front_doc_repo/assets/css/0.styles.039a693d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front_doc_repo/" class="home-link router-link-active"><!----> <span class="site-name">前端知识图谱</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front_doc_repo/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/front_doc_repo/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/front_doc_repo/knowledgemap/" class="nav-link">知识图谱</a></div> <a href="https://github.com/TRUEJASONFANS/front_doc_repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front_doc_repo/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/front_doc_repo/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/front_doc_repo/knowledgemap/" class="nav-link">知识图谱</a></div> <a href="https://github.com/TRUEJASONFANS/front_doc_repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front_doc_repo/guide/" class="sidebar-link">工具链</a></li><li><a href="/front_doc_repo/guide/packageManager.html" class="sidebar-link">包管理器</a></li><li><a href="/front_doc_repo/guide/packager/" class="sidebar-link">打包器</a></li><li><a href="/front_doc_repo/guide/compiler.html" class="sidebar-link">编译器Babel</a></li><li><a href="/front_doc_repo/guide/packager/others.html" class="sidebar-link">其他打包器相关</a></li><li><a href="/front_doc_repo/guide/unit_test.html" class="sidebar-link">测试</a></li><li><a href="/front_doc_repo/guide/canvas_doc/" class="sidebar-link">Canvas</a></li><li><a href="/front_doc_repo/guide/css_doc/" class="sidebar-link">CSS世界</a></li><li><a href="/front_doc_repo/guide/umi/" class="active sidebar-link">Umi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#历史" class="sidebar-link">历史</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#两个框架融合之和" class="sidebar-link">两个框架融合之和</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#理论基础" class="sidebar-link">理论基础</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#架构" class="sidebar-link">架构</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#资产市场" class="sidebar-link">资产市场</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#如何兼顾多类技术栈" class="sidebar-link">如何兼顾多类技术栈</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#设计理念" class="sidebar-link">设计理念</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#react-react-redux-redux-saga-dva" class="sidebar-link">React -&gt; React Redux -&gt; Redux saga-&gt; Dva</a></li><li class="sidebar-sub-header"><a href="/front_doc_repo/guide/umi/#model" class="sidebar-link">Model</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="umi"><a href="#umi" aria-hidden="true" class="header-anchor">#</a> Umi</h1> <h2 id="历史"><a href="#历史" aria-hidden="true" class="header-anchor">#</a> 历史</h2> <p>“2015 年之前我们有 Sea.JS、Arale、SPM 开源技术方案，大家可以有所耳闻。
2015 年我们接入 React，从自研的 Roof 到 Redux 再到开源的 Dva，一步步验证我们的最佳实践，并把这些实践交给开源社区检验。
2017 年开始尝试了新一代的企业级前端框架，Umi 和 Bigfish，前者是从无线业务中长出来的，后者是从中台业务中长出来的。
一个团队出两个框架毕竟不是长久之计，后来老大直接把两拨人调到一个组，于是就愉快地合并在了一起。”
<img src="http://5b0988e595225.cdn.sohucs.com/images/20190717/8e42b0fbccba4ff48a4f7f9f2acbdcc5.jpeg" alt="历史"></p> <h2 id="两个框架融合之和"><a href="#两个框架融合之和" aria-hidden="true" class="header-anchor">#</a> 两个框架融合之和</h2> <p><img src="http://5b0988e595225.cdn.sohucs.com/images/20190717/7c6ab855060444f281cdc424d2221fba.jpeg" alt="两个框架融合之和"></p> <p>内部数据：</p> <p><img src="http://5b0988e595225.cdn.sohucs.com/images/20190717/8f84ae3045ba4e7c9dd218a876e1c790.jpeg" alt="内部数据"></p> <h2 id="理论基础"><a href="#理论基础" aria-hidden="true" class="header-anchor">#</a> 理论基础</h2> <p><img src="https://shipusercontent.com/5af08fa4045b39c3110110510422527b/Pasted%20Image%202.png" alt="Utilize compiler"> <a href="https://hackmd.io/@UXqYDTxCTie91Shvsppqyw/ByGeBtv9z?type=view#%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener noreferrer">umi as a Compiler (Full Version)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="架构"><a href="#架构" aria-hidden="true" class="header-anchor">#</a> 架构</h2> <p><img src="https://gw.alipayobjects.com/zos/rmsportal/zvfEXesXdgTzWYZCuHLe.png" alt="架构"></p> <h2 id="插件"><a href="#插件" aria-hidden="true" class="header-anchor">#</a> 插件</h2> <p>市场：
<img src="http://5b0988e595225.cdn.sohucs.com/images/20190717/3fe672829b914e7994c8078f6e923654.jpeg" alt="UMI"> <img src="http://5b0988e595225.cdn.sohucs.com/images/20190717/1e007f12a4ff42cea0b50ffe5f5020f8.jpeg" alt="bigsh&amp;&amp;UMI市场"></p> <h2 id="资产市场"><a href="#资产市场" aria-hidden="true" class="header-anchor">#</a> 资产市场</h2> <p>资产市场分了四级:</p> <ol><li>组件，指通用组件，就是 antd，在下半年将要发布的 antd@4 里，我们会陆续提取更多通用组件到 antd 中。</li> <li>业务组件，不能提取通用组件的，我们会提到内部统一的业务组件仓库中。</li> <li>区块，由组件组成，可以想象成代码片段。</li> <li>页面模板，由区块组成</li></ol> <h2 id="如何兼顾多类技术栈"><a href="#如何兼顾多类技术栈" aria-hidden="true" class="header-anchor">#</a> 如何兼顾多类技术栈</h2> <ol><li>MPA（多页应用）</li> <li>微前端</li></ol> <h2 id="设计理念"><a href="#设计理念" aria-hidden="true" class="header-anchor">#</a> 设计理念</h2> <p>React 的核心概念就是组件。UMI框架的主要功能，就是定义了一套编写和使用组件的规范
![UMI前端代码层次]](https://gw.alipayobjects.com/zos/rmsportal/trbRYJugHYeODogmIgwi.png)
上图中，左侧是服务端代码的层次结构，由 Controller、Service、Data Access 三层组成服务端系统：</p> <ol><li>Controller 层负责与用户直接打交道，渲染页面、提供接口等，侧重于展示型逻辑。</li> <li>Service 层负责处理业务逻辑，供 Controller 层调用。</li> <li>Data Access 层顾名思义，负责与数据源对接，进行纯粹的数据读写，供 Service 层调用。
上图的右侧是前端代码的结构，同样需要进行必要的分层：</li> <li>Page 负责与用户直接打交道：渲染页面、接受用户的操作输入，侧重于展示型交互性逻辑。</li> <li>Model 负责处理业务逻辑，为 Page 做数据、状态的读写、变换、暂存等。</li> <li>Service 负责与 HTTP 接口对接，进行纯粹的数据读写。</li></ol> <h2 id="react-react-redux-redux-saga-dva"><a href="#react-react-redux-redux-saga-dva" aria-hidden="true" class="header-anchor">#</a> React -&gt; React Redux -&gt; Redux saga-&gt; Dva</h2> <p><a href="https://www.yuque.com/flying.ni/the-tower/tvzasn" target="_blank" rel="noopener noreferrer">图解React-&gt;React Redux-&gt; Redux sage-&gt; Dva<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="model"><a href="#model" aria-hidden="true" class="header-anchor">#</a> Model</h2> <p>Model 是前端分层中的腰部力量，承上启下，负责管理数据（状态）。业界主流的状态管理类库有 redux、mobx，等。在我们的教程中，则使用 DVA 框架承担这一角色。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> <span class="token comment">// 打开dva</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-plugin-react'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      antd<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      dva<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Model 示例</p> <div class="language- extra-class"><pre class="language-text"><code>app.model({

  namespace: 'todoList',

  state: [],

  effects: {
    *query({ _ }, { put, call }) {
      const rsp = yield call(queryTodoListFromServer);
      const todoList = rsp.data;
      yield put({ type: 'save', payload: todoList });
    },
  },

  reducers: {
    save(state, { payload: todoList }) {
      return [...state, todoList];
    },
  },

});
</code></pre></div><ol><li>namespace：model 的命名空间，只能用字符串。一个大型应用可能包含多个 model，通过namespace区分。</li> <li>state：当前 model 状态的初始值，表示当前状态。</li> <li>reducers：用于处理同步操作，可以修改 state，由 action 触发。reducer 是一个纯函数，它接受当前的 state 及一个 action 对象。action 对象里面可以包含数据体（payload）作为入参，需要返回一个新的 state。</li> <li>effects：用于处理异步操作（例如：与服务端交互）和业务逻辑，也是由 action 触发。但是，它不可以修改 state，要通过触发 action 调用 reducer 实现对 state 的间接操作。</li> <li>action：是 reducers 及 effects 的触发器，一般是一个对象，形如{ type: 'add', payload: todo }，通过 type 属性可以匹配到具体某个 reducer 或者 effect，payload 属性则是数据体，用于传送给 reducer 或 effect。</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/TRUEJASONFANS/front_doc_repo/edit/master/src/guide/umi/readme.md" target="_blank" rel="noopener noreferrer">在 github 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/14/2019, 5:57:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/front_doc_repo/guide/css_doc/" class="prev">
          CSS世界
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/front_doc_repo/assets/js/app.97cd5399.js" defer></script><script src="/front_doc_repo/assets/js/2.3956e618.js" defer></script><script src="/front_doc_repo/assets/js/26.60ea9fa2.js" defer></script>
  </body>
</html>
